Umbrella 3.0

Take a photo or movie with your smart phone and mail it to a server or website of your own.  No need for the Cloud or a third party site.

Copyright 2004, 2007, 2011, 2012 by stega:  stega@stega.org

Supported phones: iPhone 1 and newer, Android and Blackberry phones.
If using with a non-supported phone, send an email message to yourself to determine the names and formats of the specific message components and use the "other" option.

History: 

v.1 Originally took data from a Sony Erikson 615 SMS message and pushed it out. 

v1.0 Made to work with an iPhone.

v2.0 added ability to rotate image based on EXIF data in image as due to changes in IOS 3.0 and greater, images are now saved with the rotation/orientation information in the EXIF information.   

v3.0 added support for other phones and made it a bit more user friendly.  Added the installer script.  Changed over from using JPEGTRAN to Image-Magik


Requirements: mpack, image-magik and exifprobe.  You also need to be able to pipe/filter your email to the it. All three utilities, if not installed already, are available via the FreeBSD ports/pkg utilities.  For other operating systems, please check accordingly. 

To use this script:  
1) Place the Umbrella directory in a directory that is not within /home/www or where ever your website lives.  Your home directory is a good choice.
2) Edit the umbrella/variables.txt file replacing the values for all variables necessary 
3) Run the installer.sh script  (see list below for what the script does)
4) Test the application by running it with one of the included messages.
5) Create a mail filter to pass incoming messages to umbrella.sh (You will want to filter by both sending/receiving address and possibly other variables to insure basic security.)
6) Test with your phone as the sending device.  Keep in mind there is no uniformity across most Android platforms, so if you are using such a device, you may need to adjust items in the device specific script.
7) See the contents of the WORKDIR/index.php to perform tests prior to launching.  Once tests are successful, delete feed.xml and old.xml and begin your blogging. You can also simply delete your WORKDIR and re-run the installer.sh



The install.sh script does the following:
1) Creates a directory within your web site (ie /home/www/SITE/Umbrella) This is WORKDIR.
2) Moves the contents of www/ to this directory (except for index.php) and touches feed.xml and old.xml if they do not exist in the WORKDIR location
3) Edits index.php and places edited version in WORKDIR
4) unpacks magpierss and creates sym link in WORKDIR


##########################
Wishlist for future updates:
Geo EXIF Data inclusion
Trackback link
Orientation check for non-iphone
size manipulation
##########################


License: Released under GNU GPL 3.0
http://www.gnu.org/licenses/gpl-3.0.html